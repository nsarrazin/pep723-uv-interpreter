{
  "name": "Python Inline Script Metadata Injection",
  "scopeName": "source.python.script-metadata-toml",
  "injectionSelector": "L:source.python",
  "patterns": [
    {
      "begin": "^(#\\s*)(///\\s*)(script)\\s*$",
      "end": "^(#\\s*)(///\\s*)$",
      "beginCaptures": {
        "0": {
          "name": "meta.script-metadata.start.python"
        },
        "1": {
          "name": "comment.line.number-sign.python"
        },
        "2": {
          "name": "keyword.control.directive.python"
        },
        "3": {
          "name": "entity.name.type.script-metadata.python"
        }

      },
      "endCaptures": {
        "0": {
          "name": "meta.script-metadata.end.python"
        },
        "1": {
          "name": "comment.line.number-sign.python"
        },
        "2": {
          "name": "keyword.control.directive.python"
        }
      },
      "contentName": "meta.script-metadata.python",
      "patterns": [
        {
          "match": "^(#\\s*)(.*)$",
          "captures": {
            "1": {
              "name": "comment.line.number-sign.python"
            },
            "2": {
              "comment": "We can't use 'include: source.toml' here because of the leading '#' on the line.",
              "patterns": [
                {
                  "match": "\\b(true|false)\\b",
                  "name": "constant.language.boolean.toml"
                },
                {
                  "match": "\\b\\d+(\\.\\d+)?\\b",
                  "name": "constant.numeric.toml"
                },
                {
                  "match": "\"([^\"\\\\]|\\\\.)*\"",
                  "name": "string.quoted.double.toml"
                },
                {
                  "match": "'([^'\\\\]|\\\\.)*'",
                  "name": "string.quoted.single.toml"
                },
                {
                  "match": "^\\s*([a-zA-Z_][a-zA-Z0-9_-]*)\\s*=",
                  "captures": {
                    "1": {
                      "name": "variable.other.key.toml"
                    }
                  }
                },
                {
                  "match": "\\[([^\\]]+)\\]",
                  "captures": {
                    "1": {
                      "name": "entity.name.section.toml"
                    }
                  }
                },
                {
                  "match": "=",
                  "name": "punctuation.separator.key-value.toml"
                }
              ]
            }
          }
        }
      ]
    }
  ]
}
